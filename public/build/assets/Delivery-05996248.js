import{j as r,a as t}from"./app-567b6011.js";function E({deliveries:c,delivers:d,autofill:s,provider:h}){const i=[{name:"Annule",value:0,obs:"Annule"},{name:"Retour",value:1,obs:"Retour"},{name:"En cours",value:2,obs:"RAS"},{name:"Effectue",value:3,obs:"Effectue"}],u=["#F96969","#EFF545","white","#95AEDA"],l=(n,e,a)=>{n[e]=a;var o=document.getElementById("myModal");o.style.display="block",axios.put("/deliveries?tk="+localStorage.getItem("tk"),n).then(f=>{o.style.display="none",location.reload()})},p=(n,e)=>{i.forEach(a=>{if(a.value===parseInt(e)){n.stat=a.value,n.observation=a.obs;let o=document.getElementById("myModal");o.style.display="block",axios.put("/deliveries?tk="+localStorage.getItem("tk"),n).then(f=>{o.style.display="none",location.reload()})}})},m=(n,e)=>{console.log(e),confirm("Confirm the deletion")&&axios.delete("/deliveries/"+e.id+"?tk="+localStorage.getItem("tk")).then(a=>{location.reload()})},b=()=>{let n=0,e=0;return c.forEach(a=>{n+=parseInt(a.fee)*1e3,e+=parseInt(a.price)}),r("table",{children:[r("tr",{children:[t("th",{children:"Frais"}),t("th",{children:"Prix"}),t("th",{children:"Total"})]}),t("td",{children:n}),t("td",{children:e}),t("td",{children:n+e})]})};return r("div",{className:"table-responsive table mt-2",id:"dataTable-1",role:"grid","aria-describedby":"dataTable_info",children:[r("table",{className:"table my-0",id:"dataTable",style:{color:"black"},children:[t("thead",{className:"table-dark",children:r("tr",{children:[t("th",{children:"Ref"}),t("th",{children:"Lieu"}),t("th",{children:"Contact"}),t("th",{children:"Prix"}),t("th",{children:"Fraix"}),t("th",{children:"Total"}),t("th",{children:"Heure"}),t("th",{children:"Type"}),t("th",{children:"Livreur"}),t("th",{children:"Observation"}),t("th",{children:"Status"})]})}),t("tbody",{className:"liste-table",children:c.map(n=>r("tr",{style:{backgroundColor:u[n.stat]},children:[t("td",{onClick:e=>s(e,h,n.date_delivery),onDoubleClick:e=>m(e,n),style:{cursor:"pointer"},children:n.ref}),t("td",{contentEditable:!0,onBlur:e=>l(n,"place",e.target.innerHTML),children:n.place}),t("td",{contentEditable:!0,onBlur:e=>l(n,"contact",e.target.innerHTML),children:n.contact}),t("td",{contentEditable:!0,onBlur:e=>l(n,"price",e.target.innerHTML),children:n.price}),t("td",{contentEditable:!0,onBlur:e=>l(n,"fee",e.target.innerHTML),children:n.fee}),t("td",{children:parseInt(n.price)+parseInt(n.fee)*1e3}),t("td",{children:t("input",{type:"datetime-local",defaultValue:n.date_delivery,onChange:e=>{l(n,"date_delivery",e.target.value)}})}),t("td",{children:n.type}),t("td",{children:r("select",{onChange:e=>l(n,"deliver",e.target.value),children:[t("option",{children:"Deliver"}),d.map(e=>e.id===n.deliver?t("option",{value:e.id,selected:!0,children:e.name}):t("option",{value:e.id,children:e.name}))]})}),t("td",{contentEditable:!0,onBlur:e=>l(n,"observation",e.target.innerHTML),children:n.observation}),t("td",{children:t("select",{onChange:e=>p(n,e.target.value),children:i.map(e=>n.stat===e.value?t("option",{value:e.value,selected:!0,children:e.name}):t("option",{value:e.value,children:e.name}))})})]}))})]}),b()]})}export{E as D};
