import{r as w,j as a,a as e,n as C}from"./app-e4cab0c1.js";import{S as E}from"./Sidebar-8de9a089.js";import{D as I}from"./Delivery-69cb1acd.js";function S({providers:p,delivers:f}){const[o,d]=w.useState({type:"R",stat:2}),N=new URLSearchParams(new URL(window.location.href).search),g=l=>{l.preventDefault();var t=document.getElementById("myModal");t.style.display="block",axios.post("/deliveries?tk="+localStorage.getItem("tk"),o).then(c=>{t.style.display="none",c.status===401?alert("No provider found"):c.status===201&&(alert("Delvery created"),location.reload())})},y=l=>{let{name:t,value:c}=l.target;axios.post("/providers/name?name="+c+"&tk="+localStorage.getItem("tk")).then(u=>{let v=document.createElement("ul");v.className="suggestion";let n=document.getElementById("listable");for(let r=0;r<n.children.length;r++)n.children.item(r).tagName==="UL"&&n.removeChild(n.children.item(r));n.appendChild(v);for(let r=0;r<u.data.length;r++){let s=u.data[r],m=document.createElement("li");m.className="suggest",m.innerHTML=s.ref,m.onclick=L=>{for(let h=0;h<n.children.length;h++)n.children.item(h).tagName==="UL"&&n.removeChild(n.children.item(h));l.target.value=m.innerHTML,document.getElementById("type").value==="R"?(d({...o,provider:s.ref,place:s.recovery}),document.getElementById("place").value=s.recovery):d({...o,provider:s.ref})},v.appendChild(m)}})},i=l=>{let{name:t,value:c}=l.target;d({...o,[t]:c})},x=l=>{window.location.href="/deliveries?date="+l.target.value+"&tk="+localStorage.getItem("tk")},b=(l,t)=>{let c=document.getElementById("provider");c.value=t.ref,document.getElementById("type").value==="R"?(d({...o,provider:t.ref,place:t.recovery}),document.getElementById("place").value=t.recovery):d({...o,provider:t.ref}),window.location.href=window.location.href+"#form"};return a(E,{children:[e(C,{title:"Deliveries"}),e("div",{className:"container swap",style:{paddingRight:"10px"},children:e("div",{className:"row d-md-flex justify-content-md-start contain",children:e("div",{className:"col-md-6 col-xl-9 col-xxl-8",style:{minWidth:"100%"},children:a("div",{className:"card shadow card-shadow",children:[e("div",{className:"card-header py-3",children:e("h3",{className:"text-center card-title",children:"Livraisons"})}),e("nav",{className:"navbar navbar-light navbar-expand-md d-xl-flex form-item",children:e("div",{className:"container-fluid",children:e("form",{className:"d-flex justify-content-xl-center add-livraison",style:{minWidth:"100%",minHeight:"100%"},onSubmit:g,children:a("div",{className:"container",children:[a("div",{className:"row",id:"form",children:[a("div",{className:"col-md-3",children:[a("select",{className:"form-select",name:"type",id:"type",onChange:i,children:[e("option",{value:"R",children:"R"}),e("option",{value:"L",children:"L"})]}),e("div",{children:e("div",{id:"listable",children:e("input",{className:"form-control",type:"text",id:"provider",name:"provider",onChange:y,placeholder:"Fournisseur"})})})]}),e("div",{className:"col-md-3",children:a("div",{children:[e("input",{className:"form-control",type:"text",inputMode:"numeric",name:"price",onChange:i,placeholder:"Prix"}),e("input",{className:"form-control",type:"text",placeholder:"Frais",name:"fee",onChange:i,inputMode:"numeric"})]})}),e("div",{className:"col-md-3",children:a("div",{children:[e("input",{className:"form-control",type:"datetime-local",name:"date_delivery",onChange:i}),e("input",{className:"form-control",type:"text",name:"contact",onChange:i,placeholder:"Contact"})]})}),e("div",{className:"col-md-3",children:a("div",{children:[e("input",{className:"form-control",type:"text",name:"place",id:"place",onChange:i,placeholder:"Lieu"}),a("select",{className:"form-select",name:"stat",onChange:i,children:[e("option",{value:"2",children:"En cours"}),e("option",{value:"0",children:"Annule"}),e("option",{value:"1",children:"Retour"}),e("option",{value:"3",children:"Effectue"})]})]})})]}),e("div",{className:"row",children:a("div",{className:"col text-center",children:[e("input",{className:"form-control",type:"text",name:"observation",onChange:i,placeholder:"observation"}),e("div",{className:"bibodo",children:e("button",{className:"btn btn-primary",type:"submit",children:"Valider"})})]})})]})})})}),e("div",{className:"d-flex contain",children:a("label",{className:"form-label d-flex livreures",children:["Â ",e("input",{className:"field",type:"date",value:N.get("date"),onChange:x})]})}),p.map(l=>a("div",{className:"card-body card-livraison",children:[a("div",{className:"row",children:[e("div",{className:"col-md-6 col-lg-11 col-xl-12 d-xl-flex justify-content-xl-start align-items-xl-center",children:e("p",{className:"user-info",onDoubleClick:t=>{b(t,l)},children:l.ref})}),e("div",{className:"col",children:e("p",{className:"user-info",children:l.surname})}),e("div",{className:"col",children:e("p",{className:"user-info",children:l.name})}),e("div",{className:"col",children:e("p",{className:"user-info",children:l.contact})}),e("div",{className:"col",children:e("p",{className:"user-info",children:l.recovery})})]}),e(I,{deliveries:l.deliveries,delivers:f})]}))]})})})})]})}export{S as default};
